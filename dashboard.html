<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - StartupHub</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="dashboard-page">

    <div class="dashboard-container">

        <nav class="dashboard-sidebar">
            <a href="index.html" class="sidebar-logo">StartupHub</a>
            
            <div class="founder-menu">
                <span style="padding: 0 16px 10px; ">Founder Menu</span>
                <ul class="sidebar-nav">
                    <li><a href="#" class="nav-link active" data-target="#page-projects">My Projects</a></li>
                    <li><a href="#" class="nav-link" data-target="#page-offers-founder">Investment Offers</a></li>
                    <li><a href="#" class="nav-link" data-target="#page-messages-founder">Messages</a></li>
                    <li><a href="#" class="nav-link" data-target="#page-analytics">Analytics</a></li>
                    <li><a href="#" class="nav-link" data-target="#page-settings">Settings</a></li>
                </ul>
            </div>

            <div class="investor-menu">
                <span style="padding: 20px 16px 10px; ">Investor Menu</span>
                <ul class="sidebar-nav">
                    <li><a href="#" class="nav-link" data-target="#page-watchlist">Watchlist</a></li>
                    <li><a href="#" class="nav-link" data-target="#page-investments">My Investments</a></li>
                    <li><a href="#" class="nav-link" data-target="#page-messages-investor">Messages</a></li>
                    
                    <li><a href="explore.html">Advanced Search</a></li>
                </ul>
            </div>

            <div id="profile-trigger-area" class="sidebar-user">
                <div class="user-avatar-link">
                    <div id="sidebar-avatar-initials" class="user-avatar">?</div>
                </div>
                <div class="user-info">
                    <p id="sidebar-user-name">Loading...</p>
                    <span id="sidebar-user-role">...</span>
                </div>
                
                <div id="profile-dropdown" class="profile-dropdown">
                    <a href="#" class="nav-link" data-target="#page-settings">Profile</a>
                    <a href="#" class="nav-link" data-target="#page-messages">Messages</a>
                    <a href="#" id="dropdown-logout-btn">Logout</a>
                </div>
            </div>
        </nav>

        <main class="dashboard-content">
            
            <div class="dashboard-header">
                <div class="founder-menu">
                    <h1>My Projects</h1>
                    <button id="show-project-modal-btn" class="btn btn-primary" disabled>+ Create New Project</button>
                </div>
                <div class="investor-menu">
                    <h1>Investor Overview</h1>
                </div>
            </div>
            
            <div id="page-projects" class="dashboard-page-content active">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>My Projects</h2></div>
                    <div id="project-list-container" class="dashboard-section-content">
                        <p>Loading your projects...</p>
                        </div>
                </section>
            </div>

            <div id="page-offers-founder" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>Investment Offers</h2></div>
                    <div id="founder-offers-container" class="dashboard-section-content">
                        <p>Loading offers...</p>
                    </div>
                </section>
            </div>

            <div id="page-messages-founder" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>Messages</h2></div>
                    <div id="founder-messages-container" class="dashboard-section-content">
                        <p>Loading your messages...</p>
                    </div>
                </section>
            </div>
            
            <div id="page-watchlist" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>My Watchlist</h2></div>
                    <div id="watchlist-container" class="dashboard-section-content">
                        <p>Loading your watchlist...</p>
                    </div>
                </section>
            </div>

            <div id="page-investments" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>My Investment Offers</h2></div>
                    <div id="investor-offers-container" class="dashboard-section-content">
                        <p>Loading your investment offers...</p>
                    </div>
                </section>
            </div>

            <div id="page-messages-investor" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>Messages</h2></div>
                    <div id="investor-messages-container" class="dashboard-section-content">
                        <p>Loading your messages...</p>
                    </div>
                </section>
            </div>

            <div id="page-analytics" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>Analytics</h2></div>
                    <div id="analytics-container" class="dashboard-section-content">
                        <p>Loading analytics...</p>
                    </div>
                </section>
            </div>

            <div id="page-settings" class="dashboard-page-content">
                <section class="dashboard-section">
                    <div class="dashboard-section-header"><h2>Account Settings</h2></div>
                    <div class="dashboard-section-content">
                        <div class="settings-section">
                            <h3>Profile Information</h3>
                            <form id="profile-settings-form">
                                <div class="input-group">
                                    <label for="settings-name">Full Name</label>
                                    <input type="text" id="settings-name" class="input-field" required>
                                </div>
                                
                                <div class="input-group">
                                    <label for="settings-email">Email</label>
                                    <input type="email" id="settings-email" class="input-field" disabled>
                                    <small style="color: var(--color-text-secondary);">Email cannot be changed</small>
                                </div>

                                <div class="input-group">
                                    <label for="settings-role">Account Type</label>
                                    <input type="text" id="settings-role" class="input-field" disabled>
                                </div>

                                <button type="submit" class="btn btn-primary">Update Profile</button>
                                <p id="settings-success" style="color: #4CAF50; margin-top: 10px; display: none;">Profile updated successfully!</p>
                                <p id="settings-error" class="auth-error"></p>
                            </form>
                        </div>

                        <div class="settings-section" style="margin-top: 40px;">
                            <h3>Change Password</h3>
                            <form id="password-change-form">
                                <div class="input-group">
                                    <label for="settings-current-password">Current Password</label>
                                    <input type="password" id="settings-current-password" class="input-field" required>
                                </div>

                                <div class="input-group">
                                    <label for="settings-new-password">New Password</label>
                                    <input type="password" id="settings-new-password" class="input-field" minlength="6" required>
                                </div>

                                <div class="input-group">
                                    <label for="settings-confirm-password">Confirm New Password</label>
                                    <input type="password" id="settings-confirm-password" class="input-field" minlength="6" required>
                                </div>

                                <button type="submit" class="btn btn-primary">Change Password</button>
                                <p id="password-success" style="color: #4CAF50; margin-top: 10px; display: none;">Password changed successfully!</p>
                                <p id="password-error" class="auth-error"></p>
                            </form>
                        </div>

                        <div class="settings-section" style="margin-top: 40px; padding-top: 40px; border-top: 1px solid var(--color-border);">
                            <h3 style="color: #ff4444;">Danger Zone</h3>
                            <p style="color: var(--color-text-secondary); margin-bottom: 15px;">Once you delete your account, there is no going back. Please be certain.</p>
                            <button id="delete-account-btn" class="btn btn-danger">Delete Account</button>
                        </div>
                    </div>
                </section>
            </div>
            
        </main>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script src="js/main.js"></script>

    <div class="modal-overlay" id="project-modal-overlay">
    <div class="auth-modal" id="project-modal">
        <h2>Create a New Project</h2>
        <form id="create-project-form">
            <p>You have <span id="project-slots-remaining">5</span> of 5 project slots remaining.</p>
            
            <div class="input-group">
                <label for="project-title">Project Title</label>
                <input type="text" id="project-title" class="input-field" required>
            </div>
            
            <div class="input-group">
                <label for="project-category">Category</label>
                <input type="text" id="project-category" class="input-field" placeholder="e.g., SaaS, FinTech, BioTech" required>
            </div>

            <div class="input-group">
                <label for="project-description">Short Description (Mission)</label>
                <textarea id="project-description" class="input-field" rows="3" required></textarea>
            </div>

            <div class="form-grid-2">
                <div class="input-group">
                    <label for="project-goal">Funding Goal (USD)</label>
                    <input type="number" id="project-goal" class="input-field" placeholder="500000" min="1" required>
                </div>
                <div class="input-group">
                    <label for="project-share">Profit Share % Offered</label>
                    <input type="number" id="project-share" class="input-field" placeholder="10" min="1" max="100" required>
                </div>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">Save Project</button>
            <button type="button" id="close-project-modal-btn" class="btn btn-secondary" style="width: 100%; margin-top: 10px;">Cancel</button>
            
            <p id="project-error" class="auth-error"></p>
        </form>
    </div>
</div>
<div class="modal-overlay" id="edit-project-modal-overlay">
    <div class="auth-modal" id="edit-project-modal">
        <h2>Edit Project</h2>
        <form id="edit-project-form">
            <input type="hidden" id="edit-project-id">
            
            <div class="input-group">
                <label for="edit-project-title">Project Title</label>
                <input type="text" id="edit-project-title" class="input-field" required>
            </div>
            
            <div class="input-group">
                <label for="edit-project-category">Category</label>
                <input type="text" id="edit-project-category" class="input-field" placeholder="e.g., SaaS, FinTech, BioTech" required>
            </div>

            <div class="input-group">
                <label for="edit-project-description">Short Description (Mission)</label>
                <textarea id="edit-project-description" class="input-field" rows="3" required></textarea>
            </div>

            <div class="form-grid-2">
                <div class="input-group">
                    <label for="edit-project-goal">Funding Goal (USD)</label>
                    <input type="number" id="edit-project-goal" class="input-field" placeholder="500000" min="1" required>
                </div>
                <div class="input-group">
                    <label for="edit-project-share">Profit Share % Offered</label>
                    <input type="number" id="edit-project-share" class="input-field" placeholder="10" min="1" max="100" required>
                </div>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">Update Project</button>
            <button type="button" id="close-edit-project-modal-btn" class="btn btn-secondary" style="width: 100%; margin-top: 10px;">Cancel</button>
            
            <p id="edit-project-error" class="auth-error"></p>
        </form>
    </div>
</div>

<!-- Reply Message Modal -->
<div class="modal-overlay" id="reply-modal-overlay">
    <div class="auth-modal" id="reply-modal">
        <h2>Reply to Message</h2>
        <form id="reply-message-form">
            <input type="hidden" id="reply-conversation-id">
            <input type="hidden" id="reply-to-user-id">
            <input type="hidden" id="reply-to-user-name">
            
            <div class="input-group">
                <label>Replying to:</label>
                <p id="reply-recipient-display" style="font-weight: 500; color: var(--color-accent);"></p>
            </div>
            
            <div class="input-group">
                <label for="reply-content">Your Message</label>
                <textarea id="reply-content" class="input-field" rows="6" placeholder="Write your reply..." required></textarea>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reply</button>
            <button type="button" id="close-reply-modal-btn" class="btn btn-secondary" style="width: 100%; margin-top: 10px;">Cancel</button>
            
            <p id="reply-error" class="auth-error"></p>
        </form>
    </div>
</div>

<!-- Counter Offer Modal -->
<div class="modal-overlay" id="counter-offer-modal-overlay">
    <div class="auth-modal" id="counter-offer-modal">
        <h2>Counter Offer</h2>
        <form id="counter-offer-form">
            <input type="hidden" id="counter-offer-id">
            
            <div class="input-group">
                <label>Original Offer:</label>
                <p id="original-offer-display" style="color: var(--color-text-secondary);"></p>
            </div>
            
            <div class="input-group">
                <label for="counter-amount">Your Counter Amount (USD)</label>
                <input type="number" id="counter-amount" class="input-field" min="1000" required>
            </div>

            <div class="input-group">
                <label for="counter-equity">Your Counter Equity (%)</label>
                <input type="number" id="counter-equity" class="input-field" min="1" max="100" step="0.1" required>
            </div>

            <div class="input-group">
                <label for="counter-message">Message</label>
                <textarea id="counter-message" class="input-field" rows="3" placeholder="Explain your counter offer..." required></textarea>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">Send Counter Offer</button>
            <button type="button" id="close-counter-offer-modal-btn" class="btn btn-secondary" style="width: 100%; margin-top: 10px;">Cancel</button>
            
            <p id="counter-offer-error" class="auth-error"></p>
        </form>
    </div>
</div>

</body>
</html>